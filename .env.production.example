# ===== ゴールデン四柱推命アプリケーション - 本番環境変数設定 =====
# 生成日: 2025-11-07
# 用途: Vercel/GCP Cloud Run本番デプロイ用
# 重要: このファイルをコピーして実際の値を設定してください

# ===== データベース接続 =====
# Neon PostgreSQL接続文字列（本番環境）
# フォーマット: postgresql://user:password@host/database
DATABASE_URL=postgresql://neondb_owner:YOUR_PASSWORD@ep-XXXXX.ap-southeast-1.aws.neon.tech/neondb?sslmode=require

# ===== 認証システム（JWT） =====
# JWT署名用の秘密鍵（強力な32文字以上のランダム文字列を設定）
# 生成方法: openssl rand -base64 32
SECRET_KEY=YOUR_STRONG_SECRET_KEY_HERE_32_CHARACTERS_MINIMUM
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_DAYS=30

# ===== アプリケーション設定 =====
# 環境（production固定）
NODE_ENV=production

# フロントエンドURL（Vercel本番URL）
FRONTEND_URL=https://your-frontend-app.vercel.app

# バックエンドURL（GCP Cloud Run本番URL）
BACKEND_URL=https://golden-saju-api-XXXXX.asia-northeast1.run.app

# ===== CORS設定（重要！） =====
# フロントエンドからのAPIアクセスを許可（カンマ区切りで複数指定可能）
# 注: 本番環境では実際のフロントエンドURLのみを指定すること
CORS_ORIGIN=https://your-frontend-app.vercel.app

# ===== フロントエンド用API設定 =====
# Vite環境変数プレフィックス: VITE_
# バックエンドAPIのベースURL（/apiまで含める）
VITE_API_URL=https://golden-saju-api-XXXXX.asia-northeast1.run.app/api

# ===== 既存資産パス =====
# 210年節気データベース（1900-2109年）
# Docker環境では絶対パス、ローカル開発では相対パス
SOLAR_TERMS_DB_PATH=/app/solar_terms_1900_2109_JIEQI_ONLY.json

# ドンサゴンマスターデータベース（天干・地支マトリックス）
DONSAGONG_MASTER_DB_PATH=/app/docs/DONSAGONG_MASTER_DATABASE.md

# ===== セキュリティ注意事項 =====
# 1. 本番環境ではVITE_SKIP_AUTH環境変数を絶対に設定しないこと
# 2. SECRET_KEYは強力なランダム文字列を使用すること
# 3. DATABASE_URLには実際の本番データベース接続文字列を設定すること
# 4. CORS_ORIGINには信頼できるフロントエンドURLのみを設定すること
# 5. このファイルは.gitignoreに追加して、Gitにコミットしないこと

# ===== デプロイ先別設定ガイド =====

# --- Vercel（フロントエンド）---
# Environment Variables画面で以下を設定：
# - VITE_API_URL: バックエンドAPIのURL（/apiまで含める）
# - NODE_ENV: production

# --- GCP Cloud Run（バックエンド）---
# Environment Variables画面で以下を設定：
# - DATABASE_URL: Neon PostgreSQL接続文字列
# - SECRET_KEY: JWT署名用秘密鍵
# - CORS_ORIGIN: フロントエンドURL（カンマ区切りで複数可）
# - BACKEND_URL: 自身のCloud Run URL
# - FRONTEND_URL: VercelフロントエンドURL
# - SOLAR_TERMS_DB_PATH: /app/solar_terms_1900_2109_JIEQI_ONLY.json
# - DONSAGONG_MASTER_DB_PATH: /app/docs/DONSAGONG_MASTER_DATABASE.md
