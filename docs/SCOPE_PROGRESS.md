---

# ゴールデン四柱推命アプリケーション E2Eテスト進捗管理

最終更新: 2025-11-08

---
## 📊 E2Eテスト全体進捗

**最終テスト実行: 2025-11-08**

- **総テスト項目数**: 53項目（CHAIN-001～005: 33項目、CHAIN-006: 20項目）
- **テストPass**: 34項目 (64.2%)
- **テストFail**: 0項目 (0%)
- **未実行**: 19項目 (35.8%、CHAIN-006残り19項目）

### ✅ プロジェクト実装状況サマリー
**Phase 1完了（2025-11-03）**
- **全6ページ実装完了**: TopPage, ListPage, SajuDetailPage, SettingsPage, LoginPage, RegisterPage
- **全APIエンドポイント実装完了**: 計算、保存、一覧、削除、エクスポート、移行、年月日運取得
- **認証システム完了**: JWT + RefreshToken、ログイン・ログアウト・新規登録
- **E2Eテスト**: 64.2% Pass（34/53項目）

### 実行環境
- フロントエンド: localhost:3247（Vite 7 + React 19）
- バックエンド: localhost:8432（FastAPI 0.109 + Python 3.9）
- データベース: PostgreSQL 15（Neon）
- Playwright: v1.56.1

---

## 📝 テストチェーン別詳細進捗

### 1. CHAIN-001: 命式計算全体フロー - 11項目

**進捗: 11/11項目 (100%)** 🎉 完全合格

#### 正常系（必須）
- [x] **E2E-CHAIN-001-S1**: 正常系 - 男性、1990年3月15日14時30分生まれ
  - ✅ **Pass** (2025-11-03 11:27, 1.5s)
  - LocalStorage保存確認OK
  - 四柱表示正確性OK

- [x] **E2E-CHAIN-001-S2**: 正常系 - 女性、1995年6月20日10時15分生まれ
  - ✅ **Pass** (2025-11-03 12:30, 6.0s)
  - 四柱・大運・遷移確認OK

#### エッジケース
- [x] **E2E-CHAIN-001-S3**: エッジケース - 範囲最小値（1900年1月1日0時0分）
  - ✅ **Pass** (2025-11-03 12:31, 0.8s)
  - 四柱計算成功（己亥/丙子/甲戌/甲子）

- [x] **E2E-CHAIN-001-S4**: エッジケース - 範囲最大値（2109年12月31日23時59分）
  - ✅ **Pass** (2025-11-03 12:32, 1.9s)
  - 四柱計算成功（己巳/丙子/甲午/丙子）

#### 異常系
- [x] **E2E-CHAIN-001-S5**: 異常系 - 範囲外の日付（1899年12月31日）
  - ✅ **Pass** (2025-11-03 12:33, 3.8s)
  - エラーメッセージ表示確認OK

- [x] **E2E-CHAIN-001-S6**: 異常系 - 範囲外の日付（2110年1月1日）
  - ✅ **Pass** (2025-11-03 12:34, 1.7s)
  - エラーメッセージ表示確認OK

- [x] **E2E-CHAIN-001-S7**: 異常系 - 未入力フィールド（生年月日なし）
  - ✅ **Pass** (2025-11-03 12:35, 1.8s)
  - エラーメッセージ表示確認OK

- [x] **E2E-CHAIN-001-S8**: 異常系 - 未入力フィールド（性別なし）
  - ✅ **Pass** (2025-11-03 12:36, 1.8s)
  - エラーメッセージ表示確認OK

- [x] **E2E-CHAIN-001-S9**: 異常系 - ネットワークエラー
  - ✅ **Pass** (2025-11-03 12:37, 4.3s)
  - エラーメッセージ表示確認OK

#### パフォーマンス
- [x] **E2E-CHAIN-001-P1**: パフォーマンス - 計算API応答時間
  - ✅ **Pass** (2025-11-03 11:27, 1.2s)
  - 応答時間: 575ms ✅ 理想値以内（1000ms未満）

#### セキュリティ
- [x] **E2E-CHAIN-001-SEC1**: セキュリティ - XSS脆弱性チェック
  - ✅ **Pass** (2025-11-03 11:27, 2.2s)
  - XSS攻撃が正しく防がれました

- [x] **E2E-CHAIN-001-SEC2**: セキュリティ - SQLインジェクション対策
  - ✅ **Pass** (2025-11-03 11:27, 5.1s)
  - SQLインジェクション攻撃が正しく防がれました

---

### 2. CHAIN-002: 水平スクロール運勢表示 - 4項目

**進捗: 4/4項目 (100%)** 🎉 完全復旧

#### 正常系（必須）
- [x] **E2E-CHAIN-002-S1**: 正常系 - 階層的運勢表示（大運→年運→月運→日運）
  - ✅ **Pass** (2025-11-03 最終, 9.4s)
  - 階層的運勢表示OK（大運10個、年運10個、月運12個、日運31個）
  - 各カードクリックで詳細表示OK

- [x] **E2E-CHAIN-002-S2**: 正常系 - 現在の運勢ハイライト表示
  - ✅ **Pass** (2025-11-03 最終, 6.6s)
  - 現在の大運マーカー表示OK
  - 現在の年運（2025年）表示OK
  - 現在の月運（11月）表示OK
  - 今日の日運（3日）表示OK

#### UI/UX
- [x] **E2E-CHAIN-002-S3**: UI/UX - 水平スクロールのスムーズ動作
  - ✅ **Pass** (2025-11-03 最終, 3.5s)
  - 大運スクロール可能確認OK
  - スクロール所要時間: 505ms
  - スクロール後も表示維持OK

#### 異常系
- [x] **E2E-CHAIN-002-S4**: 異常系 - 存在しない命式IDでアクセス
  - ✅ **Pass** (2025-11-03 最終, 8.7s)
  - エラーメッセージ表示OK
  - リダイレクト確認OK

---

### 3. CHAIN-003: インタラクティブ運勢選択 - 5項目

**進捗: 5/5項目 (100%)** 🎉 完全合格

#### 正常系（必須）
- [x] **E2E-CHAIN-003-S1**: 正常系 - 大運クリックで年運表示
  - ✅ **Pass** (2025-11-03 15:05, 7.0s)
  - ログインモード対応完了、年運API動作確認OK

- [x] **E2E-CHAIN-003-S2**: 正常系 - 年運クリックで月運表示
  - ✅ **Pass** (2025-11-03 15:20, 2.1s)
  - テストデータ修正完了、月運API動作確認OK

- [x] **E2E-CHAIN-003-S3**: 正常系 - 月運クリックで日運表示
  - ✅ **Pass** (2025-11-03 15:20, 1.7s)
  - テストデータ修正完了、日運API動作確認OK

#### UI/UX
- [x] **E2E-CHAIN-003-S4**: UI/UX - 連続クリックでスムーズに階層移動
  - ✅ **Pass** (2025-11-03 15:20, 9.8s)
  - パフォーマンステスト合格（年運2.1s、月運1.0s、日運1.7s）

- [x] **E2E-CHAIN-003-S5**: 異常系 - 範囲外の年・月・日でアクセス
  - ✅ **Pass** (2025-11-03 最終, 939ms)
  - エラーレスポンス確認OK（'不正な年月指定です'）

---

### 4. CHAIN-004: ゲスト→ログイン移行 - 5項目

**進捗: 5/5項目 (100%)** 🎉 完全合格

#### 正常系（必須）
- [x] **E2E-CHAIN-004-S1**: 正常系 - ゲストデータ移行成功
  - ✅ **Pass** (2025-11-03 最終, 7.5s)
  - LocalStorageに2件のゲストデータ保存OK
  - 新規登録API成功（201）
  - データ移行API成功（201）
  - LocalStorageクリア確認OK
  - 移行データが一覧に表示OK
  - **改善**: POST /api/saju/migrate API実装により合格 🎉

- [x] **E2E-CHAIN-004-S2**: 正常系 - ゲストデータなしで新規登録
  - ✅ **Pass** (2025-11-03 最終, 6.4s)
  - 登録API成功OK
  - データ移行APIは呼び出されない（期待通り）
  - /listページにリダイレクト成功
  - 命式一覧が空であることを確認OK

- [x] **E2E-CHAIN-004-S3**: 正常系 - データ移行チェックボックスOFFで新規登録
  - ✅ **Pass** (2025-11-03 最終, 7.8s)
  - データ移行チェックボックスOFF確認OK
  - 登録API成功OK
  - LocalStorageデータは保持される（期待通り）
  - データ移行APIは呼び出されない（期待通り）

#### 異常系
- [x] **E2E-CHAIN-004-S4**: 異常系 - データ移行中にエラー発生
  - ✅ **Pass** (2025-11-03 最終, 7.7s)
  - 登録API成功（アカウント作成OK）
  - /listページにリダイレクトOK
  - LocalStorageクリアOK
  - データ移行失敗時の適切なエラーハンドリング確認OK

#### UI/UX
- [x] **E2E-CHAIN-004-S5**: UI/UX - 移行確認ダイアログの表示
  - ✅ **Pass** (2025-11-03 最終, 5.0s)
  - データ移行チェックボックス表示確認（初期状態ON）
  - チェックボックスラベル表示確認OK
  - データ件数表示確認OK（2件）

---

### 5. CHAIN-005: データ管理統合 - 7項目

**進捗: 6/7項目 (85.7%)** ✅ 改善中

#### 正常系（必須）
- [x] **E2E-CHAIN-005-S1**: 正常系 - 命式一覧取得と表示
  - ✅ **Pass** (2025-11-03 13:10, 5.5s)
  - 3件の命式データ表示確認OK

- [x] **E2E-CHAIN-005-S2**: 正常系 - 命式削除
  - ✅ **Pass** (2025-11-03 最終, 5.6s)
  - 削除API成功確認OK
  - 削除後の一覧データが正しく更新されることを確認OK

- [x] **E2E-CHAIN-005-S3**: 正常系 - データエクスポート
  - ✅ **Pass** (2025-11-03 14:00, 4.1s)
  - 3件のデータエクスポート・ダウンロード成功

- [x] **E2E-CHAIN-005-S4**: 正常系 - 連鎖テスト（一覧→削除→エクスポート）
  - ✅ **Pass** (2025-11-03 14:05, 12.9s)
  - Promise.all問題を解決（S2と同様のイベントハンドラパターン適用）

#### 異常系
- [x] **E2E-CHAIN-005-S5**: 異常系 - 存在しない命式の削除
  - ✅ **Pass** (2025-11-03 14:10, 4.3s)
  - Authorizationヘッダー追加で403→404を正常取得

- [x] **E2E-CHAIN-005-S6**: 異常系 - 空の一覧表示
  - ✅ **Pass** (2025-11-03 最終, 3.5s)
  - 空一覧の表示確認OK

#### セキュリティ
- [x] **E2E-CHAIN-005-SEC1**: セキュリティ - 未ログイン状態で一覧取得
  - ✅ **Pass** (2025-11-03 最終, 1.4s)
  - 未ログイン時の適切なセキュリティチェック確認OK

---

### 6. UI改善テスト - 7項目

**進捗: 7/7項目 (100%)** 🎉 完全合格

- [x] **要件1**: 人生グラフが階段式で表示される
  - ✅ **Pass** (2025-11-03 最終, 2.4s)

- [x] **要件2&4**: 5段階色分けグラフの表示確認
  - ✅ **Pass** (2025-11-03 最終, 1.6s)

- [x] **要件3**: 大凶は波線、大吉は太線で表示
  - ✅ **Pass** (2025-11-03 最終, 2.4s)

- [x] **要件2**: 詳細ページに閉じるボタンがある
  - ✅ **Pass** (2025-11-03 最終, 3.0s)

- [x] **要件3**: 閉じるボタンで /list に遷移する
  - ✅ **Pass** (2025-11-03 最終, 1.5s)

- [x] **要件1**: グラフに点（dot）が表示されない
  - ✅ **Pass** (2025-11-03 最終, 1.5s)

- [x] **統合テスト**: 全ての要件が満たされている
  - ✅ **Pass** (2025-11-03 最終, 2.6s)

---

## 🎯 失敗テスト詳細分析

### 0. E2E-CHAIN-004-S2/S3: 登録APIが呼び出されない 🔴🔴

**症状**:
- E2E-CHAIN-004-S2: ゲストデータなしで新規登録 - Fail
- E2E-CHAIN-004-S3: データ移行チェックOFF - Fail
- 共通エラー: `TimeoutError: page.waitForResponse - /api/auth/register が10秒以内に応答なし`

**調査結果**:
1. ✅ バックエンドAPI `/api/auth/register` は正常動作
   - Pythonから直接呼び出し → 201 Created
   - curlは特殊なエスケープ問題（無関係）
2. ✅ authService.register() の実装は正常
3. ✅ AuthContext.register() の実装は正常
4. ✅ RegisterPage.tsx のフォーム実装は正常
5. ❌ ブラウザで登録ボタンをクリック → APIリクエストが送信されない

**エラーコンテキスト（S2実行時）**:
```yaml
- alert [ref=e16]:
  - generic [ref=e20]: 登録に失敗しました
```
→ RegisterPageで「登録に失敗しました」が表示されている

**推測される原因**:
1. フロントエンドでエラーが発生し、APIリクエストが送信される前にキャッチされている
2. RegisterPage.tsx の handleRegister() 内でエラーが発生している可能性
3. apiClient.post() でエラーが発生している可能性

**次のアクション**:
- [ ] ブラウザのコンソールログを詳細に確認
- [ ] RegisterPage.tsx の handleRegister() にデバッグログを追加
- [ ] authService.register() の実行前後にログを追加
- [ ] try-catch ブロックでキャッチされているエラーを特定

---

### 1. E2E-CHAIN-004-S1: ゲストデータ移行失敗 🔴

**エラー**: `TimeoutError: page.waitForResponse - POST /api/saju/migrate`

**症状**:
- LocalStorageに2件のゲストデータ保存 ✅
- 新規登録API `/api/auth/register` 成功（201） ✅
- データ移行API `/api/saju/migrate` が10秒以内に応答なし ❌

**可能性**:
1. 移行APIが未実装
2. ルーティング設定が不正
3. フロントエンドで移行APIが呼び出されていない

**次のアクション**:
- [ ] バックエンドのエンドポイント `/api/saju/migrate` 存在確認
- [ ] ルーティング設定確認
- [ ] フロントエンドの `AuthContext.tsx` で移行API呼び出しコード確認

---

### 2. E2E-CHAIN-005-S2: 命式削除失敗 🔴

**エラー**: `TimeoutError: page.waitForResponse - DELETE /api/saju/{id}`

**症状**:
- 削除ボタンクリック ✅
- 確認ダイアログ表示 ✅
- DELETE API `/api/saju/{id}` が30秒以内に応答なし ❌

**可能性**:
1. 削除APIが未実装
2. エンドポイントパスが不正
3. フロントエンドでDELETEリクエストが送信されていない

**次のアクション**:
- [ ] バックエンドのエンドポイント `DELETE /api/saju/{id}` 存在確認
- [ ] フロントエンドの削除処理コード確認
- [ ] ネットワークログで実際のリクエストを確認

---

### 3. E2E-CHAIN-005-S3: データエクスポート失敗 🔴

**エラー**: `TimeoutError: page.waitForEvent('download')`

**症状**:
- エクスポートボタンクリック ✅
- ダウンロードイベントが30秒以内に発生せず ❌

**可能性**:
1. エクスポートAPIが未実装
2. ダウンロード処理が実装されていない
3. エクスポートボタンのイベントハンドラが未実装

**次のアクション**:
- [ ] バックエンドのエンドポイント `GET /api/saju/export` 存在確認
- [ ] フロントエンドのエクスポート処理コード確認
- [ ] ダウンロード処理の実装確認

---

### 4. E2E-CHAIN-005-S6: 空の一覧表示失敗 🟡

**エラー**: 詳細不明

**次のアクション**:
- [ ] エラーログ確認
- [ ] スクリーンショット確認
- [ ] 失敗原因の特定

---

### 5. E2E-CHAIN-005-SEC1: 未ログイン状態で一覧取得失敗 🟡

**エラー**: 詳細不明

**次のアクション**:
- [ ] エラーログ確認
- [ ] 認証チェックの実装確認
- [ ] リダイレクト処理の確認

---

## 📋 次に実行すべきアクション（優先度順）

### 🔴 **最優先（P0）** - バックエンドAPI実装確認

#### 1. データ移行API確認
```bash
# エンドポイント存在確認
curl -X POST http://localhost:8432/api/saju/migrate \
  -H "Authorization: Bearer {token}" \
  -H "Content-Type: application/json" \
  -d '{"guestData": []}'
```

**確認項目**:
- [ ] エンドポイントが存在するか
- [ ] ルーティング設定が正しいか
- [ ] 実装されているか（コード確認）

#### 2. 削除API確認
```bash
# エンドポイント存在確認
curl -X DELETE http://localhost:8432/api/saju/{id} \
  -H "Authorization: Bearer {token}"
```

**確認項目**:
- [ ] エンドポイントが存在するか
- [ ] 削除処理が実装されているか
- [ ] レスポンスが正常に返るか

#### 3. エクスポートAPI確認
```bash
# エンドポイント存在確認
curl -X GET http://localhost:8432/api/saju/export \
  -H "Authorization: Bearer {token}"
```

**確認項目**:
- [ ] エンドポイントが存在するか
- [ ] ファイルダウンロード処理が実装されているか
- [ ] Content-Dispositionヘッダーが正しいか

---

### 🟠 **高優先（P1）** - フロントエンド実装確認

#### 4. AuthContext.tsx でデータ移行処理確認
**確認項目**:
- [ ] 新規登録時に `migrateGuestData` パラメータを正しく送信しているか
- [ ] 登録成功後に移行APIを呼び出しているか
- [ ] LocalStorageからゲストデータを正しく取得しているか

#### 5. ListPage での削除処理確認
**確認項目**:
- [ ] 削除ボタンクリック時にDELETEリクエストを送信しているか
- [ ] 確認ダイアログの実装が正しいか
- [ ] 削除成功後に一覧を再読み込みしているか

#### 6. エクスポート処理確認
**確認項目**:
- [ ] エクスポートボタンのイベントハンドラが実装されているか
- [ ] ダウンロード処理が実装されているか
- [ ] ファイル名が正しく設定されているか

---

### 🟡 **中優先（P2）** - 未実行テストの実行

#### 7. CHAIN-001 未実行テスト（7項目）
- [ ] E2E-CHAIN-001-S2: 女性、1995年6月20日10時15分生まれ
- [ ] E2E-CHAIN-001-S3: 範囲最小値（1900年1月1日）
- [ ] E2E-CHAIN-001-S4: 範囲最大値（2109年12月31日）
- [ ] E2E-CHAIN-001-S5: 範囲外（1899年12月31日）
- [ ] E2E-CHAIN-001-S6: 範囲外（2110年1月1日）
- [ ] E2E-CHAIN-001-S7: 未入力フィールド（生年月日なし）
- [ ] E2E-CHAIN-001-S8: 未入力フィールド（性別なし）

#### 8. CHAIN-003 未実行テスト（4項目）
- [ ] E2E-CHAIN-003-S1: 大運選択でグラフ更新
- [ ] E2E-CHAIN-003-S2: 年運選択でグラフ更新
- [ ] E2E-CHAIN-003-S3: 運勢選択状態の永続化
- [ ] E2E-CHAIN-003-S5: 運勢カードのホバー・選択状態

#### 9. CHAIN-004 残りテスト（4項目）
- [ ] E2E-CHAIN-004-S2: データ移行チェックOFF
- [ ] E2E-CHAIN-004-S3: 移行API失敗時のエラーハンドリング
- [ ] E2E-CHAIN-004-S4: ゲストデータなしで移行チェックON
- [ ] E2E-CHAIN-004-S5: 移行確認ダイアログの表示

---

## 📊 E2Eテスト項目分類別カウント（最終結果）

| 分類 | 項目数 | Pass済み | Fail | 未実行 | 進捗率 |
|------|--------|----------|------|--------|--------|
| 正常系（必須） | 14項目 | 10項目 | 4項目 | 0項目 | 71.4% ✅ |
| 異常系 | 9項目 | 3項目 | 6項目 | 0項目 | 33.3% |
| エッジケース | 2項目 | 0項目 | 0項目 | 2項目 | 0% |
| UI/UX | 12項目 | 8項目 | 4項目 | 0項目 | 66.7% ✅ |
| パフォーマンス | 1項目 | 1項目 | 0項目 | 0項目 | 100% ✅ |
| セキュリティ | 3項目 | 3項目 | 0項目 | 0項目 | 100% ✅ |
| **合計** | **41項目** | **25項目** | **14項目** | **2項目** | **61.0%** |

**最終達成**: 21.2% → 61.0% (+39.8%) 🎉 大幅改善

---

## 📍 テストチェーン別進捗サマリー（最終結果）

| テストチェーン | Pass | Fail | 未実行 | 進捗率 | 前回比 |
|--------------|------|------|--------|--------|--------|
| CHAIN-001: 命式計算全体フロー | 5/11 | 0 | 6 | 45.5% | +18.2% ✅ |
| CHAIN-002: 水平スクロール運勢表示 | 4/4 | 0 | 0 | 100% | +75% 🎉 |
| CHAIN-003: インタラクティブ運勢選択 | 1/5 | 4 | 0 | 20.0% | +20% |
| CHAIN-004: ゲスト→ログイン移行 | 5/5 | 0 | 0 | 100% | +80% 🎉 |
| CHAIN-005: データ管理統合 | 2/7 | 5 | 0 | 28.6% | 変更なし |
| UI改善テスト | 7/7 | 0 | 0 | 100% | 新規追加 🎉 |

---

## 🎯 推奨される次のステップ

### 🔴 Phase 0: 緊急修正（最優先）
**CHAIN-002が100%→25%に大幅後退**

1. **命式詳細ページ遷移の修正**
   - TopPage → SajuDetailPage への遷移が破損
   - 原因調査: POST /api/saju/save または LocalStorage保存
   - 影響範囲: CHAIN-002（3失敗）、CHAIN-003（1失敗）

### 🟠 Phase 1: フロントエンド実装完了（高優先）
**バックエンドAPI実装済み、フロントエンドが未統合**

2. **削除機能のフロントエンド統合**
   - API実装済み: DELETE /api/saju/{id}
   - フロントエンド: ボタンクリックでAPIを呼び出していない
   - 修正箇所: ListPage または SettingsPage

3. **エクスポート機能のフロントエンド統合**
   - API実装済み: GET /api/saju/export
   - フロントエンド: ボタンクリックでAPIを呼び出していない
   - 修正箇所: SettingsPage

### 🟡 Phase 2: 新規登録フロー修正
4. **RegisterPage.tsx の修正**
   - 登録ボタンクリック → APIリクエストが送信されない
   - ブラウザコンソールエラーの確認
   - エラーハンドリングの修正

### 🟢 Phase 3: 失敗テストの再実行
5. CHAIN-002/003 再実行（遷移修正後）
6. CHAIN-005-S2/S3/S4 再実行（削除・エクスポート統合後）
7. CHAIN-004-S2/S3/S4 再実行（登録フロー修正後）

### ⚪ Phase 4: 未実行テストの完了
8. CHAIN-001 残り7項目の実行
9. CHAIN-003 残り4項目の実行

---

**次回更新予定**: 緊急修正完了後、全テスト再実行

---

## 🆕 機能拡張: スマホレスポンシブ対応強化

**開始日**: 2025年11月5日  
**目標完了日**: 2025年11月6日（予定）  
**優先度**: High  
**ステータス**: 要件定義完了、実装待ち

### 実装タスク

| タスク | 担当 | 開始 | 完了 | 備考 |
|--------|------|------|------|------|
| 要件定義 | - | [x] | [x] | 完了 |
| 実装計画策定 | - | [x] | [x] | 完了 |
| Critical修正（6件） | - | [ ] | [ ] | 横スクロール修正含む |
| High修正（15件） | - | [ ] | [ ] | フォント・ボタンサイズ |
| HomePage削除 | - | [ ] | [ ] | TopPageに統一 |
| E2Eテスト実行 | - | [ ] | [ ] | 33項目全実行 |
| 実機テスト | - | [ ] | [ ] | iPhone SE + 14 Pro推奨 |
| ドキュメント更新 | - | [ ] | [ ] | requirements.md整理 |

---

### 修正ファイル一覧（21件）

#### 🔴 Critical修正（6件、約1時間10分）

| # | ファイル | 修正内容 | 実装 | テスト |
|---|---------|---------|------|--------|
| 1 | SajuDetailPage/index.tsx | 親コンテナmaxWidth修正 | [ ] | [ ] |
| 2 | LifeGraphSection.tsx | グラフ幅800px化 | [ ] | [ ] |
| 3 | SajuDetailPage/index.tsx | ヘッダーボタン48px化 | [ ] | [ ] |
| 4 | ListPage/index.tsx | アイコンボタン48px化 | [ ] | [ ] |
| 5 | SettingsPage.tsx | レスポンシブ対応追加 | [ ] | [ ] |
| 6 | HomePage.tsx | ファイル削除 | [ ] | [ ] |

#### 🔴 Critical追加（横スクロール、4件、約10分）

| # | ファイル | 修正内容 | 実装 | テスト |
|---|---------|---------|------|--------|
| 7 | YearScrollSection.tsx | webkit-overflow追加 | [ ] | [ ] |
| 8 | MonthScrollSection.tsx | webkit-overflow追加 | [ ] | [ ] |
| 9 | DayScrollSection.tsx | webkit-overflow追加 | [ ] | [ ] |

#### 🟠 High修正（15件、約2-3時間）

| # | ファイル | 修正内容 | 実装 | テスト |
|---|---------|---------|------|--------|
| 10 | TopPage/index.tsx | 性別ボタン | [ ] | [ ] |
| 11 | TopPage/index.tsx | エラーメッセージ | [ ] | [ ] |
| 12 | ListPage/index.tsx | 空アイコン | [ ] | [ ] |
| 13 | SajuCard.tsx | 四柱ミニ表示 | [ ] | [ ] |
| 14 | SajuCard.tsx | 削除ボタン | [ ] | [ ] |
| 15 | PillarsSection.tsx | 天干地支 | [ ] | [ ] |
| 16 | PillarsSection.tsx | ラベル | [ ] | [ ] |
| 17 | DaeunScrollSection.tsx | カード最小幅 | [ ] | [ ] |
| 18 | DaeunScrollSection.tsx | 天干地支サイズ | [ ] | [ ] |
| 19 | LoginPage.tsx | パスワード忘れた | [ ] | [ ] |
| 20 | RegisterPage.tsx | 利用規約リンク | [ ] | [ ] |
| 21 | RegisterPage.tsx | パスワード強度 | [ ] | [ ] |

---

### 横スクロール修正の詳細

#### 根本原因
- **SajuDetailPage/index.tsx 152行目**: `maxWidth: { xs: '100%' }`
- 親コンテナが画面幅100%に制限され、子要素が横にはみ出せない

#### 修正方法
```tsx
// 修正前
maxWidth: { xs: '100%', sm: '900px', lg: '1400px' }

// 修正後（xsを削除）
maxWidth: { sm: '900px', lg: '1400px' }
```

#### 影響範囲
- ✅ LifeGraphSection（人生グラフ）
- ✅ DaeunScrollSection（大運）
- ✅ YearScrollSection（年運）
- ✅ MonthScrollSection（月運）
- ✅ DayScrollSection（日運）

全ての横スクロールが正常動作するようになります。

---

### テスト計画

#### E2Eテスト（Playwright）
| テストチェーン | 項目数 | 実行 | Pass | 備考 |
|--------------|--------|------|------|------|
| CHAIN-001: 命式計算 | 11 | [ ] | - | - |
| CHAIN-002: 水平スクロール | 4 | [ ] | - | 横スクロール確認 |
| CHAIN-003: インタラクティブ | 5 | [ ] | - | - |
| CHAIN-004: ゲスト移行 | 5 | [ ] | - | - |
| CHAIN-005: データ管理 | 7 | [ ] | - | - |
| UI改善テスト | 7 | [ ] | - | - |
| **合計** | **33** | [ ] | - | - |

#### 実機テスト（推奨）
| デバイス | 画面幅 | テスト | 備考 |
|---------|--------|--------|------|
| iPhone SE | 375px | [ ] | 最小サイズ |
| iPhone 14 Pro | 393px | [ ] | 標準サイズ |
| iPad mini | 768px | [ ] | タブレット |

#### 確認項目
- [ ] 横スクロールが滑らかに動作（最優先）
- [ ] タップ領域が44px以上
- [ ] フォントが読みやすい（14px以上）
- [ ] レイアウト崩れなし
- [ ] PC表示に影響なし

---

### 完了チェックリスト
- [ ] Critical 6件修正完了
- [ ] 横スクロール4件修正完了
- [ ] High 15件修正完了
- [ ] HomePage削除完了
- [ ] E2Eテスト33項目Pass
- [ ] 実機テスト完了（iPhone SE, 14 Pro）
- [ ] 横スクロール動作確認（5箇所全て）
- [ ] requirements.md整理（実装済み部分削除）

---

### 工数見積もり

| Phase | 内容 | 工数 |
|-------|------|------|
| Phase 1 | Critical修正（6件） | 1時間10分 |
| Phase 2 | High修正（15件） | 2-3時間 |
| Phase 3 | テスト・検証 | 30分 |
| **合計** | **21件** | **約4-5時間** |

---

**作成日**: 2025年11月5日  
**最終更新**: 2025年11月5日


---

### 7. CHAIN-006: スマホレスポンシブ対応強化 - 20項目

**進捗: 1/20項目 (5%)** 🆕 実行中

#### 正常系（必須）- 横スクロール動作確認
- [x] **E2E-CHAIN-006-S1**: 横スクロール - 人生グラフ（LifeGraphSection）
  - ✅ **Pass** (2025-11-08, 3.8s)
  - ビューポート: iPhone SE (375px × 667px)
  - グラフ幅800px、スクロール動作確認OK

- [ ] **E2E-CHAIN-006-S2**: 横スクロール - 大運（DaeunScrollSection）
- [ ] **E2E-CHAIN-006-S3**: 横スクロール - 年運（YearScrollSection）
- [ ] **E2E-CHAIN-006-S4**: 横スクロール - 月運（MonthScrollSection）
- [ ] **E2E-CHAIN-006-S5**: 横スクロール - 日運（DayScrollSection）

#### 正常系（必須）- タップ領域確認
- [ ] **E2E-CHAIN-006-S6**: タップ領域 - ヘッダーボタン（閉じるボタン）
- [ ] **E2E-CHAIN-006-S7**: タップ領域 - ListPageアイコンボタン
- [ ] **E2E-CHAIN-006-S8**: タップ領域 - 性別選択ボタン

#### UI/UX（推奨）- フォントサイズ確認
- [ ] **E2E-CHAIN-006-U1**: フォントサイズ - 四柱の天干地支
- [ ] **E2E-CHAIN-006-U2**: フォントサイズ - 大運カードの天干地支
- [ ] **E2E-CHAIN-006-U3**: フォントサイズ - エラーメッセージ

#### UI/UX（推奨）- レイアウト崩れ確認
- [ ] **E2E-CHAIN-006-U4**: レイアウト - TopPage（性別ボタン配置）
- [ ] **E2E-CHAIN-006-U5**: レイアウト - ListPage（空アイコン表示）
- [ ] **E2E-CHAIN-006-U6**: レイアウト - SajuCard（四柱ミニ表示）
- [ ] **E2E-CHAIN-006-U7**: レイアウト - LoginPage（パスワード忘れたリンク）

#### パフォーマンス
- [ ] **E2E-CHAIN-006-P1**: スクロール速度 - 大運カード（10個）のスクロール所要時間
- [ ] **E2E-CHAIN-006-P2**: スクロール速度 - 月運カード（12個）のスクロール所要時間

#### クロスデバイス
- [ ] **E2E-CHAIN-006-D1**: デバイス別 - iPhone SE (375px)
- [ ] **E2E-CHAIN-006-D2**: デバイス別 - iPhone 14 Pro (393px)
- [ ] **E2E-CHAIN-006-D3**: デバイス別 - iPad mini (768px)

---
